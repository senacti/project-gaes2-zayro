create database zayro_system;
use zayro_system;

CREATE TABLE ROLES_SISTEMA (
    ID_ROL INT(15) NOT NULL,
    PRIMARY KEY (ID_ROL),
    DESCRIPCION_ROLES VARCHAR(45)
);

CREATE TABLE PERMISOS (
    ID_PERMISO INT(15) NOT NULL,
    PRIMARY KEY (ID_PERMISO),
    PERMISO VARCHAR(45)
);

CREATE TABLE USUARIO (
    ID_USUARIO INT(15) NOT NULL,
    PRIMARY KEY (ID_USUARIO),
    NOMBRE VARCHAR(45),
    DIRECCION_BOGOTA VARCHAR(45),
    E_MAIL VARCHAR(45),
    TELEFONO_1 VARCHAR(15) NOT NULL,
    TELEFONO_2 VARCHAR(15),
    ID_ROL INT(15),
    FOREIGN KEY (ID_ROL) REFERENCES ROLES_SISTEMA (ID_ROL)
);

CREATE TABLE USUARIO_PERMISOS(
    ID_USUARIO INT(15),
    ID_PERMISO INT(15),
    PRIMARY KEY (ID_USUARIO, ID_PERMISO),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO),
    FOREIGN KEY (ID_PERMISO) REFERENCES PERMISOS (ID_PERMISO)
    
);

CREATE TABLE TIPO_SERVICIO (
    ID_TIPO_SERVICIO INT(15) NOT NULL,
    PRIMARY KEY (ID_TIPO_SERVICIO),
    DESCRIPCION_TIPO_SERVICIO VARCHAR(45)
);

CREATE TABLE TRANSPORTADORA (
    ID_TRANSPORTADORA INT(15) NOT NULL,
    NOMBRE_TRANSPORTADORA VARCHAR(45),
    CONTACTO VARCHAR(45),
    PRIMARY KEY (ID_TRANSPORTADORA)
);

CREATE TABLE ENVIOS (
    ID_ENVIO INT(15) NOT NULL,
    PRIMARY KEY (ID_ENVIO),
    NUMERO_RADICADO_ENVIO VARCHAR(20),
    ID_TRANSPORTADORA INT(15),
    FOREIGN KEY (ID_TRANSPORTADORA) REFERENCES TRANSPORTADORA (ID_TRANSPORTADORA)
);

CREATE TABLE INVENTARIO (
    ID_INVENTARIO INT(15) NOT NULL,
    PRIMARY KEY (ID_INVENTARIO),
    CANTIDAD INT(5),
    PRECIO_UNITARIO INT(7),
    ID_USUARIO INT(15),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE CATEGORIA (
    ID_CATEGORIA INT(15) NOT NULL,
    PRIMARY KEY (ID_CATEGORIA),
    CATEGORIA VARCHAR(45)
);

CREATE TABLE CAMPAÑAS (
    ID_CAMPAÑA INT(15) NOT NULL,
    PRIMARY KEY (ID_CAMPAÑA),
    NOMBRE_CAMPAÑA VARCHAR(45),
    DESCRIPCION VARCHAR(45),
    DESCUENTO_DISFRAZ INT(6),
    EMAIL_CLIENTES VARCHAR(45),
    FECHA_INICIO DATETIME,
    FECHA_FIN DATETIME,
    ID_USUARIO INT(15),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE DESCUENTOS (
    ID_DESCUENTOS INT(15) NOT NULL,
    PRIMARY KEY (ID_DESCUENTOS),
    PORCENTAJE_DESCUENTO INT(3),
    ID_INVENTARIO INT(15),
    FOREIGN KEY (ID_INVENTARIO) REFERENCES INVENTARIO (ID_INVENTARIO)
);

CREATE TABLE DESCUENTOS_CAMPAÑAS(
     ID_DESCUENTOS INT(15),
     ID_CAMPAÑA INT(15),
     PRIMARY KEY (ID_DESCUENTOS, ID_CAMPAÑA),
     FOREIGN KEY (ID_DESCUENTOS) REFERENCES DESCUENTOS(ID_DESCUENTOS),
     FOREIGN KEY (ID_CAMPAÑA) REFERENCES CAMPAÑAS (ID_CAMPAÑA)
);

CREATE TABLE ORDEN (
    ID_ORDEN INT(15) NOT NULL,
    PRIMARY KEY (ID_ORDEN),
    TALLA INT(45),
    CANTIDAD INT(5),
    METODO_PAGO VARCHAR(45),
    PRECIO INT(7),
    PRECIO_TOTAL INT(7),
    ID_TIPO_SERVICIO INT(15),
    ID_ENVIO INT(15),
    ID_USUARIO INT(15),
    ID_INVENTARIO INT(15),
    FOREIGN KEY (ID_TIPO_SERVICIO) REFERENCES TIPO_SERVICIO (ID_TIPO_SERVICIO),
    FOREIGN KEY (ID_ENVIO) REFERENCES ENVIOS (ID_ENVIO),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO),
    FOREIGN KEY (ID_INVENTARIO) REFERENCES INVENTARIO (ID_INVENTARIO)
);

CREATE TABLE PRODUCTO (
    ID_PRODUCTO INT(15) NOT NULL,
    PRIMARY KEY (ID_PRODUCTO),
    NOMBRE_DISFRAZ VARCHAR(45),
    TALLA VARCHAR(45),
    DESCRIPCION VARCHAR(45),
    ID_INVENTARIO INT(15),
    ID_CATEGORIA INT(15),
    FOREIGN KEY (ID_INVENTARIO) REFERENCES INVENTARIO (ID_INVENTARIO),
    FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA (ID_CATEGORIA)
);

CREATE TABLE ACCESORIOS (
    ID_ACCESORIO INT(15) NOT NULL,
    PRIMARY KEY (ID_ACCESORIO),
    ACCESORIOS VARCHAR(45)
);

CREATE TABLE ORDEN_PRODUCTO (
    ID_ORDEN INT(15),
    FOREIGN KEY (ID_ORDEN) REFERENCES ORDEN (ID_ORDEN),
    ID_PRODUCTO INT(15),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO (ID_PRODUCTO),
    PRIMARY KEY (ID_ORDEN, ID_PRODUCTO)
);

CREATE TABLE PRODUCTO_ACCESORIOS (
    ID_PRODUCTO INT(15),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO (ID_PRODUCTO),
    ID_ACCESORIO INT (15),
    FOREIGN KEY (ID_ACCESORIO) REFERENCES ACCESORIOS (ID_ACCESORIO),
    PRIMARY KEY (ID_PRODUCTO, ID_ACCESORIO)
);

CREATE TABLE ESTADO (
    ID_ESTADO INT(15) NOT NULL,
    DESCRIPCION_ESTADO VARCHAR(45),
    FECHA_ENVIO DATETIME NOT NULL,
    FECHA_DEVOLUCION DATETIME,
    ID_ENVIO INT(15),
    FOREIGN KEY (ID_ENVIO) REFERENCES ENVIOS (ID_ENVIO)
);

CREATE TABLE SALIDA_PRODUCTO (
    ID_SALIDA_PRODUCTO INT(15) NOT NULL,
    PRIMARY KEY (ID_SALIDA_PRODUCTO),
    NOMBRE_PRODUCTO VARCHAR(45),
    ID_CATEGORIA INT(15),
    TALLA VARCHAR(45),
    FECHA_SALIDA DATETIME,
    ID_PRODUCTO INT(15),
    FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA (ID_CATEGORIA),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO (ID_PRODUCTO)
);

CREATE TABLE ENTRADA_PRODUCTO (
    ID_ENTRADA_PRODUCTO INT(15) NOT NULL,
    PRIMARY KEY (ID_ENTRADA_PRODUCTO),
    NOMBRE_PRODUCTO VARCHAR(45),
    ID_CATEGORIA INT(15),
    TALLA VARCHAR(45),
    FECHA_ENTRADA DATETIME,
    ID_PRODUCTO INT(15),
    FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA (ID_CATEGORIA),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO (ID_PRODUCTO)
);

CREATE TABLE RECIBO_VENTA (
    ID_RECIBO_VENTA INT(15) NOT NULL,
    PRIMARY KEY (ID_RECIBO_VENTA),
    CANTIDAD INT(3),
    METODO_PAGO VARCHAR(45),
    PRECIO_UNIDAD INT(7),
    PRECIO_TOTAL INT(7),
    FECHA DATETIME,
    ID_ORDEN INT(15),
    ID_TIPO_SERVICIO INT(15),
    ID_USUARIO INT(15),
    FOREIGN KEY (ID_ORDEN) REFERENCES ORDEN (ID_ORDEN),
    FOREIGN KEY (ID_TIPO_SERVICIO) REFERENCES TIPO_SERVICIO (ID_TIPO_SERVICIO),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE RECIBO_VENTA_PRODUCTO (
    ID_PRODUCTO INT(15),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO (ID_PRODUCTO),
    ID_RECIBO_VENTA INT(15),
    FOREIGN KEY (ID_RECIBO_VENTA) REFERENCES RECIBO_VENTA (ID_RECIBO_VENTA),
    PRIMARY KEY (ID_PRODUCTO, ID_RECIBO_VENTA)
);